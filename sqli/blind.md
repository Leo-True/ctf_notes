# 布尔盲注

如果sql查询的结果不在页面上显示，则无法实施“堆叠注入”。这时候可以考虑“布尔盲注”。如果能构造sql语句，如果在是否“`满足`”某条件的情况下，返回的页面`有差异`，则可以以此为依据推断出数据值。即：在布尔盲注中，攻击者会尝试发送特定的SQL查询，然后根据Web应用程序的响应（通常是页面内容的改变）来判断查询的结果是真还是假。这种技术通常用在攻击者不能直接看到错误信息或者数据库查询的结果，但是可以观察到基于查询结果的页面内容变化的情况。

假设我们有一个Web应用程序，它有一个URL参数`user_id`，用来根据用户ID显示用户信息。那么URL可能看起来像这样：

`http://example.com/profile?user_id=1`

Web应用程序可能在后台执行如下的SQL查询：

`SELECT * FROM users WHERE id = $_GET['user_id']`

在这个例子中，如果攻击者将`user_id`参数改为`1 OR 1=1`，那么SQL查询就会变成：

`SELECT * FROM users WHERE id = 1 OR 1=1`

因为`1=1`永远为真，所以这个查询实际上会返回所有的用户信息。如果Web应用程序没有正确地处理这种情况（比如限制每次只能显示一名用户的信息），那么攻击者就能看到所有用户的信息。

在布尔盲注的情况下，攻击者不能直接看到这些信息，但他们能根据页面内容的改变来判断查询结果是真还是假。例如，如果他们将`user_id`参数改为`1 AND 1=1`，页面内容不会有任何变化，因为查询仍然返回ID为1的用户信息。然后他们将`user_id`参数改为`1 AND 1=2`，那么页面可能会显示错误信息或者没有用户信息，因为`1=2`为假，所以查询没有返回任何信息。

通过这种方式，攻击者可以逐个猜测数据库中的信息。例如，他们可以通过改变`user_id`参数为`1 AND SUBSTRING(password, 1, 1) = 'a'`，`1 AND SUBSTRING(password, 1, 1) = 'b'`等，逐个猜测ID为1的用户的密码的第一个字符是什么。然后他们可以猜测第二个字符，第三个字符，等等，直到猜出整个密码。

注意：MySQL、SqlServer、PostgreSQL数据库的子字符串函数均为 `SUBSTRING()`，Oracle的子字符串函数为 `SUBSTR()` 。
